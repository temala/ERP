<mat-card class="m-20 full-height">
  <mat-toolbar fxLayout="row" fxLayoutAlign="space-between center">
    <h3 i18n>New invoice</h3>
    <span class="spacer"></span>
    <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="10">

    </div>
  </mat-toolbar>
  <div class="m-20">
    <form [formGroup]="addInvoiceForm" (ngSubmit)="AddInvoice(addInvoiceForm)" fxLayout="column">
      <div class="small-padding">
        <div class="input-row">
          <div fxFlex="100">
            <mat-form-field appearance="standard">
              <mat-label i18n>Client</mat-label>
              <mat-select matInput formControlName="client">
                <mat-option *ngFor="let client of clients" [value]="client">{{client.name}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <mat-divider></mat-divider>
        <h3 class="small-padding" i18n>Invoice information</h3>
        <div class="input-row">
          <div fxFlex="30">
            <div class="input-row">
              <mat-form-field appearance="outline">
                <mat-label i18n>Invoice identification</mat-label>
                <input matInput formControlName="invoiceId">
              </mat-form-field>
            </div>
            <div class="input-row">
              <mat-form-field appearance="outline">
                <mat-label i18n>Billing date</mat-label>
                <input matInput [matDatepicker]="picker" formControlName="billingDate">
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
            </div>
          </div>
          <div fxFlex="70">
            <div class="input-row">
              <mat-form-field appearance="outline">
                <mat-label i18n>Due date</mat-label>
                <input matInput formControlName="dueDate">
              </mat-form-field>
            </div>
            <div class="input-row">
              <mat-form-field appearance="outline">
                <mat-label i18n>Message</mat-label>
                <textarea matInput formControlName="message"></textarea>
              </mat-form-field>
            </div>
          </div>
        </div>
        <mat-divider></mat-divider>
        <h3 class="small-padding" i18n>Invoice details</h3>
        <app-invoice-line [invoiceLine]="invoiceLine" *ngFor="let invoiceLine of lines"></app-invoice-line>
        <div class="input-row">
          <div fxFlex="70">
            <button type="button" mat-flat-button color="primary" (click)="AddNewLine()" i18n>Add new line</button>
          </div>
          <div fxFlex="30">
            <div class="total-section-row">
              <span class="total-section-label">Total HT:</span>
              <span class="total-section-value">{{ totalHT }}</span>
            </div>
            <div class="total-section-row">
              <span class="total-section-label">VAT rate:</span>
              <span class="total-section-value">{{ tva }}</span>
            </div>
            <div class="total-section-row">
              <span class="total-section-label">Total to pay:</span>
              <span class="total-section-value">{{ total }}</span>
            </div>
          </div>
        </div>
        <mat-divider></mat-divider>
        <div class="action-padding">
          <button mat-flat-button color="primary" type="submit" i18n>Save</button>
        </div>
      </div>
    </form>
  </div>
</mat-card>